{"ast":null,"code":"import html2canvas from \"html2canvas\";\nimport * as THREE from 'three';\n/*import velocity from 'velocity-animate';*/\nrequire('velocity-animate');\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass';\nimport { TexturePass } from 'three/examples/jsm/postprocessing/TexturePass';\nimport { MaskPass, ClearMaskPass } from 'three/examples/jsm/postprocessing/MaskPass';\nimport { GlitchPass } from 'three/examples/jsm/postprocessing/GlitchPass';\nimport JQuery from \"jquery\";\nimport textfill from \"./jquery.textfill.min\";\n\n//for some reason, it was undefined\nlet background, renderBackground, renderScene, composer1, loader;\nlet ajax = document.getElementById(\"page-structure\");\n/*let loadingText = document.getElementById(\"loader-text\");*/\n\n/*window.jQuery = window.$ = require(jQuery);*/\n\n/*require.config({\r\n    paths: {\r\n        \"jquery\": \"node_modules/jquery/dist/jquery.js\",\r\n        \"velocity\": \"node_modules/velocity-animate/velocity.js\",\r\n\r\n    },\r\n    shim: {\r\n        \"velocity\": {\r\n            deps: [ \"jquery\" ]\r\n        },\r\n        // Optional, if you're using the UI pack:\r\n        \"velocity-ui\": {\r\n            deps: [ \"velocity\" ]\r\n        }\r\n    }\r\n});*/\nconsole.log(\"hi2\");\n\n//deprecated\n//$(document).ready(function() {\n$(function () {\n  console.log(\"hi3\");\n\n  // CANVAS & MOBILE TEST\n  let windowWidth = $(window).width(),\n    windowHeight = $(window).height();\n  /*let isMobile = navigator.userAgent.match(/mobile/i);*/\n  let webGLTrue = false;\n  if (window.WebGLRenderingContext) {\n    webGLTrue = true;\n  }\n  console.log(\"hi4\");\n  // CLASSES\n  /*if (isMobile) {\r\n      $('body').addClass('mobile');\r\n  }\r\n  else if (!isMobile) {\r\n      $('body').addClass('desktop');\r\n  }*/\n\n  // GLOBAL VARIABLES\n  let img, canvas, container, imgRatio, containerRatio;\n  let screenShotCanvas,\n    canvasDataURL,\n    canvasImage,\n    screenCaptured = false,\n    animateable = true,\n    popstate = false,\n    isFourOhFour = false,\n    inputReady = true;\n\n  //let seriously,\n  //    sourceImage,\n  //    layers,\n  //    edge,\n  //    blend1,\n  //    linearGreen,\n  //    scale1,\n  //    blend2,\n  //    linearPurple,\n  //    scale2,\n  //    blend3,\n  //    blend4,\n  //    blend5,\n  //    target;\n\n  // INITIAL LOAD FUNCTIONS\n\n  startupFunctions();\n  console.log(\"hi5\");\n\n  /* $(window).on('load', function(){*}*/\n  /*Had to comment out.*/\n  console.log(\"hi6\");\n  if (webGLTrue) {\n    captureScreen();\n    console.log(\"hi7\");\n  }\n  console.log(\"hi8\");\n  initialLoader();\n\n  /*  });*/\n\n  function startupFunctions() {\n    /*if (isMobile) {\r\n        $('body').removeClass('noscroll');\r\n    }*/\n\n    widowControl();\n  }\n\n  // IMAGE FUNCTIONS\n  //function imageFunctions() {\n\n  //let slickDrag = false;\n  //if (isMobile) {\n  //    slickDrag = true;\n  // }\n  // }\n\n  // DEBOUNCE FUNCTION\n  function debounce(func, wait, immediate) {\n    let timeout;\n    return function () {\n      let context = this,\n        args = arguments;\n      let later = function () {\n        timeout = null;\n        if (!immediate) func.apply(context, args);\n      };\n      let callNow = immediate && !timeout;\n      clearTimeout(timeout);\n      timeout = setTimeout(later, wait);\n      if (callNow) func.apply(context, args);\n    };\n  }\n  let debounceAdjust = debounce(function () {\n    widowControl();\n  }, 50);\n  window.addEventListener('resize', debounceAdjust);\n\n  // WIDOW CONTROL\n  function widowControl() {\n    /* windowWidth = $(window).width();\r\n     let widowElements = $('h1, h2, h3, h4, h5, h6, li, p, figcaption, .case-study-tagline, .large-cta').not('.discovery_cell p, #site-nav li, footer li');*/\n\n    /*widowElements.each(function() {\r\n        $(this).html($(this).html().replace(/&nbsp;/g, ' '));\r\n    });\r\n      if (windowWidth > 640) {\r\n        widowElements.each(function() {\r\n            $(this).html($(this).html().replace(/\\s((?=(([^\\s<>]|<[^>]*>)+))\\2)\\s*$/,'&nbsp;$1'));\r\n        });\r\n    }*/\n  }\n\n  // HTML CANVAS & INITIAL LOAD FUNCTIONS\n  function captureScreen() {\n    html2canvas(ajax, {\n      letterRendering: true\n    }).then(canvas => {\n      screenShotCanvas = canvas;\n      canvasDataURL = screenShotCanvas.toDataURL();\n      canvasImage = new Image();\n      canvasImage.src = canvasDataURL;\n      screenCaptured = true;\n      /*canvasImage.style.border = \"none\";*/\n      console.log(canvas);\n    });\n  }\n  function initialLoader() {\n    $('body').removeClass('noscroll');\n    let loadText = 'Hello, I am Gary Liang.';\n    let loaderDone = false;\n    $.each(loadText.split(''), function (i, letter) {\n      setTimeout(function () {\n        $('#loader-text').html($('#loader-text').html() + letter);\n        /*loadingText.html((loadingText).html() + letter);*/\n      }, 60 * i);\n    });\n    setTimeout(function () {\n      loaderDone = true;\n    }, 1700);\n\n    //check to make sure the document has been fully loaded before removing loader\n    let readyStateCheckInterval = setInterval(function () {\n      if (document.readyState === \"complete\" && loaderDone) {\n        clearInterval(readyStateCheckInterval);\n        $('#initial-loader').velocity({\n          translateZ: 0,\n          opacity: 0\n        }, {\n          //display: 'none',\n          delay: 0,\n          duration: 800\n        });\n        if (webGLTrue) {\n          loadPageCanvas();\n          setTimeout(function () {\n            removePageCanvas();\n            $('#initial-loader').remove();\n          }, 500);\n        } else {\n          setTimeout(function () {\n            $('#initial-loader').remove();\n          }, 1001);\n        }\n      }\n    }, 10);\n  }\n\n  // GLITCHING\n  function initializeGlitch(image, height) {\n    var container, stats;\n    var camera, scene, sceneBG, renderer, composer, composerScene;\n\n    //var mesh,\n    //    light,\n    //    dotEffect,\n    //    shiftEffect,\n    //    sepiaEffect;\n\n    let glitchDtSize = 100,\n      glitchDelay = 1,\n      glitchAmplification = .5;\n    let fps = 20;\n    if (isFourOhFour) {\n      fps = 5;\n    }\n    let SCREEN_WIDTH = window.innerWidth;\n    let SCREEN_HEIGHT = height;\n    /*let SCREEN_HEIGHT = window.innerHeight;\r\n    console.log(SCREEN_HEIGHT);\r\n    console.log(height);*/\n    //let ratio = SCREEN_WIDTH / SCREEN_HEIGHT;\n\n    /*if (height > 4096){\r\n        SCREEN_HEIGHT = 4096;\r\n    }*/\n\n    let windowHalfX = window.innerWidth / 2;\n    let windowHalfY = height / 2;\n    let delta = 0.1;\n    function init() {\n      scene = new THREE.Scene();\n      sceneBG = new THREE.Scene();\n      camera = new THREE.OrthographicCamera(-windowHalfX, windowHalfX, windowHalfY, -windowHalfY, 1, 10000);\n      camera.position.z = 100;\n      let texture = new THREE.TextureLoader().load(image);\n      // turns off resizing\n      texture.minFilter = THREE.LinearFilter;\n\n      // immediately use the texture for material creation\n      //background\n      let background = new THREE.MeshBasicMaterial({\n        map: texture\n      });\n      background.map.needsUpdate = true;\n      /*let plane = new THREE.PlaneBufferGeometry(1, 1);*/\n      let plane = new THREE.PlaneBufferGeometry(1, 1);\n      let bgMesh = new THREE.Mesh(plane, background);\n      bgMesh.position.z = 1;\n      bgMesh.scale.set(SCREEN_WIDTH, height, 1);\n      sceneBG.add(bgMesh);\n      bgMesh.material.map.needsUpdate = true;\n\n      //var sceneMask = new THREE.Scene();\n\n      renderer = new THREE.WebGLRenderer();\n      renderer.setClearColor(0xffffff);\n      renderer.setSize(window.innerWidth, window.innerHeight);\n      renderer.setPixelRatio(window.devicePixelRatio);\n      renderer.autoClear = false;\n      renderer.gammaInput = true;\n      renderer.gammaOutput = true;\n      renderBackground = new RenderPass(sceneBG, camera);\n      $(renderer.domElement).attr('id', 'loader').css('height', height);\n      $('#main-body').append(renderer.domElement);\n      let rtParameters = {\n        minFilter: THREE.LinearFilter,\n        magFilter: THREE.LinearFilter,\n        format: THREE.RGBFormat,\n        stencilBuffer: true\n      };\n      let clearMask = new ClearMaskPass();\n      composer = new EffectComposer(renderer, new THREE.WebGLRenderTarget(SCREEN_WIDTH, SCREEN_HEIGHT, rtParameters));\n      renderScene = new TexturePass(composer.renderTarget2.texture);\n      composer.addPass(renderBackground);\n      composer.addPass(clearMask);\n      composer1 = new EffectComposer(renderer, new THREE.WebGLRenderTarget(SCREEN_WIDTH, SCREEN_HEIGHT, rtParameters));\n\n      //let glitch = new GlitchPass(glitchDtSize, glitchDelay, glitchAmplification);\n      let glitch = new GlitchPass(glitchDtSize);\n      glitch.renderToScreen = true;\n      composer1.addPass(renderScene);\n      composer1.addPass(glitch);\n      renderScene.uniforms['tDiffuse'].value = composer.renderTarget2;\n    }\n    function render() {\n      renderer.clear();\n      composer.render(delta);\n      composer1.render(delta);\n    }\n    function animate() {\n      if (animateable) {\n        setTimeout(function () {\n          render();\n          requestAnimationFrame(animate);\n        }, 1000 / fps);\n      }\n    }\n    init();\n    animate();\n  }\n  function loadPageCanvas() {\n    $('html').velocity('scroll', {\n      axis: 'y',\n      duration: 1000,\n      mobileHA: false\n    });\n    animateable = true;\n    initializeGlitch(canvasDataURL, screenShotCanvas.height);\n    $('#loader').velocity({\n      opacity: [1, 0]\n    }, {\n      duration: 1000\n    });\n  }\n  function removePageCanvas() {\n    $('#loader').velocity({\n      opacity: 0\n    }, {\n      delay: 500,\n      duration: 1000\n    });\n    setTimeout(function () {\n      animateable = false;\n      $('#loader').remove();\n    }, 1600);\n  }\n\n  /*Home page elements*/\n  function daWidth(event) {\n    let jquery_width = $( /*.home-content */'.grid2 span').width();\n    let js_width = document.querySelector( /*'.home-content */'.grid2 span').offsetWidth;\n    console.log(event + \" - jquery:\" + jquery_width + \", js:\" + js_width);\n  }\n  function resetHelloiaman() {\n    $('.home-content .i-am').removeAttr('style');\n    $('.home-content .i-am span').removeAttr('style');\n  }\n  function helloiaman(section) {\n    // resetHelloiaman();\n\n    let WIDTH = document.querySelector('.home-content .i-am .grid2').offsetWidth;\n    console.log(WIDTH);\n    let section_width;\n    let offset;\n    if (section === \"helloiam\") {\n      section_width = 203 / 263;\n      offset = 0;\n    } else if (section === \"iama\") {\n      section_width = 108 / 263;\n      offset = 128 / 263;\n    } else if (section === \"iaman\") {\n      section_width = 135 / 263;\n      offset = 128 / 263;\n    }\n    offset = offset * 100;\n    $('.home-content .i-am .grid2').css({\n      '-ms-transform': 'translateX(-' + offset.toString() + '%)',\n      '-webkit-transform': 'translateX(-' + offset.toString() + '%)',\n      'transform': 'translateX(-' + offset.toString() + '%)'\n    });\n    $('.home-content .i-am').css('width', (section_width * WIDTH).toString() + \"px\");\n    console.log(offset);\n    console.log(\"this has worked\");\n    // '-ms-transform': 'translateX(-' + offset.toString() + '%)',\n    //     '-webkit-transform': 'translateX(-' + offset.toString() + '%)',\n    //     'transform': 'translateX(-' + offset.toString() + '%)'\n  }\n\n  function maxFillText(selector) {\n    let completion = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n    $(selector).removeAttr('style');\n    jQuery(selector).textfill({\n      complete: function () {\n        completion();\n      },\n      maxFontPixels: 0\n    });\n  }\n  function randimateTechTitle() {\n    let LENGTH = 700;\n    let FRAMES = 2;\n    randimateText('.tech.title .line.one span', 'TECH', LENGTH / FRAMES / 4, FRAMES);\n    randimateText('.tech.title .line.two span', 'LOVER', LENGTH / FRAMES / 5, FRAMES);\n  }\n  // Switching functionality\n  function switchToHomeTitle(selector) {\n    $('.title').removeClass('visible');\n    $(selector + '.title').addClass('visible');\n    maxFillText(selector + '.title .text-fill');\n  }\n  function switchToHomeDetails(selector) {\n    $('.details').removeClass('visible');\n    $(selector + '.details').addClass('visible');\n  }\n  function switchToHomeSwitch(selector) {\n    $('.switch').removeClass('active');\n    $(selector + '.switch').addClass('active');\n  }\n  function isVowel(s) {\n    return /^[aeiou]$/i.test(s);\n  }\n  function switchToHome(selector) {\n    switchToHomeTitle(selector);\n    switchToHomeDetails(selector);\n    switchToHomeSwitch(selector);\n\n    // Case checks\n    if (selector === \".name\") {\n      console.log('helloiam');\n      helloiaman('helloiam');\n    } else if (isVowel(selector.charAt(1))) {\n      console.log('iaman');\n      helloiaman('iaman');\n    } else {\n      console.log('iama');\n      helloiaman('iama');\n    }\n    if (selector === \".tech\") {\n      randimateTechTitle();\n    }\n    current = selector;\n  }\n  function randimateText(selector, text, speed, frames) {\n    if (speed === undefined) {\n      speed = 50;\n    }\n    if (frames === undefined) {\n      frames = 8;\n    }\n    /*let theLetters = \"abcdefghijklmnopqrstuvwxyz#%&^+=-\";*/ // You can customize what letters it will cycle through\n    let theLetters = \"01\";\n    let ctnt = text; // Your text goes here\n    let increment = frames; // frames per step. Must be >2\n    // speed is per frame, not per rustle\n\n    let clen = ctnt.length;\n    let si = 0;\n    let stri = 0;\n    let block = \"\";\n    let fixed = \"\";\n    //Call self x times, whole function wrapped in setTimeout\n    (function rustle(i) {\n      setTimeout(function () {\n        if (--i) {\n          rustle(i);\n        }\n        nextFrame(i);\n        si = si + 1;\n      }, speed);\n    })(clen * increment + 1);\n    function nextFrame(pos) {\n      for (let i = 0; i < clen - stri; i++) {\n        //Random number\n        let num = Math.floor(theLetters.length * Math.random());\n        //Get random letter\n        let letter = theLetters.charAt(num);\n        block = block + letter;\n      }\n      if (si === increment - 1) {\n        stri++;\n      }\n      if (si === increment) {\n        // Add a letter;\n        // every speed*10 ms\n        fixed = fixed + ctnt.charAt(stri - 1);\n        si = 0;\n      }\n      $(selector).html(fixed + block);\n      block = \"\";\n    }\n  }\n\n  /*Home page elements*/\n  /*resetHelloiaman();*/\n  //daWidth(\"before load\");\n  console.log(\"theLasthi\");\n  let current = \"\";\n\n  /*window.onload = function() {*/\n  console.log(\"thelasthi2\");\n  $('.name.switch').on('touchstart click', function (e) {\n    e.preventDefault();\n    switchToHome('.name');\n  });\n  $('.tech.switch').on('touchstart click', function (e) {\n    e.preventDefault();\n    switchToHome('.tech');\n  });\n  $('.creative.switch').on('touchstart click', function (e) {\n    e.preventDefault();\n    switchToHome('.creative');\n  });\n  /*$('.avid.switch').on('touchstart click', function(e) {\r\n      e.preventDefault();\r\n      switchToHome('.avid');\r\n  });*/\n  /*};*/\n  /*window.onresize = function() {\r\n      maxFillText('.text-fill', function() {\r\n          switchToHome(current);\r\n      });\r\n  };*/\n});","map":{"version":3,"names":["html2canvas","THREE","require","EffectComposer","RenderPass","TexturePass","MaskPass","ClearMaskPass","GlitchPass","JQuery","textfill","background","renderBackground","renderScene","composer1","loader","ajax","document","getElementById","console","log","$","windowWidth","window","width","windowHeight","height","webGLTrue","WebGLRenderingContext","img","canvas","container","imgRatio","containerRatio","screenShotCanvas","canvasDataURL","canvasImage","screenCaptured","animateable","popstate","isFourOhFour","inputReady","startupFunctions","captureScreen","initialLoader","widowControl","debounce","func","wait","immediate","timeout","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","debounceAdjust","addEventListener","letterRendering","then","toDataURL","Image","src","removeClass","loadText","loaderDone","each","split","i","letter","html","readyStateCheckInterval","setInterval","readyState","clearInterval","velocity","translateZ","opacity","delay","duration","loadPageCanvas","removePageCanvas","remove","initializeGlitch","image","stats","camera","scene","sceneBG","renderer","composer","composerScene","glitchDtSize","glitchDelay","glitchAmplification","fps","SCREEN_WIDTH","innerWidth","SCREEN_HEIGHT","windowHalfX","windowHalfY","delta","init","Scene","OrthographicCamera","position","z","texture","TextureLoader","load","minFilter","LinearFilter","MeshBasicMaterial","map","needsUpdate","plane","PlaneBufferGeometry","bgMesh","Mesh","scale","set","add","material","WebGLRenderer","setClearColor","setSize","innerHeight","setPixelRatio","devicePixelRatio","autoClear","gammaInput","gammaOutput","domElement","attr","css","append","rtParameters","magFilter","format","RGBFormat","stencilBuffer","clearMask","WebGLRenderTarget","renderTarget2","addPass","glitch","renderToScreen","uniforms","value","render","clear","animate","requestAnimationFrame","axis","mobileHA","daWidth","event","jquery_width","js_width","querySelector","offsetWidth","resetHelloiaman","removeAttr","helloiaman","section","WIDTH","section_width","offset","toString","maxFillText","selector","completion","length","undefined","jQuery","complete","maxFontPixels","randimateTechTitle","LENGTH","FRAMES","randimateText","switchToHomeTitle","addClass","switchToHomeDetails","switchToHomeSwitch","isVowel","s","test","switchToHome","charAt","current","text","speed","frames","theLetters","ctnt","increment","clen","si","stri","block","fixed","rustle","nextFrame","pos","num","Math","floor","random","on","e","preventDefault"],"sources":["C:/Users/gary-/Documents/MyProjects/Portfolio/Gary-Liang.github.io/frontend/src/index.js"],"sourcesContent":["\r\n\r\nimport html2canvas from \"html2canvas\";\r\nimport * as THREE from 'three';\r\n/*import velocity from 'velocity-animate';*/\r\nrequire('velocity-animate');\r\n\r\n\r\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer';\r\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass';\r\nimport { TexturePass } from 'three/examples/jsm/postprocessing/TexturePass';\r\nimport { MaskPass, ClearMaskPass } from 'three/examples/jsm/postprocessing/MaskPass';\r\nimport { GlitchPass } from 'three/examples/jsm/postprocessing/GlitchPass';\r\nimport JQuery from \"jquery\";\r\nimport textfill from \"./jquery.textfill.min\";\r\n\r\n//for some reason, it was undefined\r\nlet background, renderBackground, renderScene, composer1, loader;\r\n\r\nlet ajax = document.getElementById(\"page-structure\");\r\n/*let loadingText = document.getElementById(\"loader-text\");*/\r\n\r\n/*window.jQuery = window.$ = require(jQuery);*/\r\n\r\n/*require.config({\r\n    paths: {\r\n        \"jquery\": \"node_modules/jquery/dist/jquery.js\",\r\n        \"velocity\": \"node_modules/velocity-animate/velocity.js\",\r\n\r\n    },\r\n    shim: {\r\n        \"velocity\": {\r\n            deps: [ \"jquery\" ]\r\n        },\r\n        // Optional, if you're using the UI pack:\r\n        \"velocity-ui\": {\r\n            deps: [ \"velocity\" ]\r\n        }\r\n    }\r\n});*/\r\nconsole.log(\"hi2\");\r\n\r\n//deprecated\r\n//$(document).ready(function() {\r\n$(function() {\r\n    console.log(\"hi3\");\r\n\r\n    // CANVAS & MOBILE TEST\r\n    let windowWidth = $(window).width(),\r\n        windowHeight = $(window).height();\r\n    /*let isMobile = navigator.userAgent.match(/mobile/i);*/\r\n    let webGLTrue = false;\r\n\r\n    if (window.WebGLRenderingContext) {\r\n        webGLTrue = true;\r\n    }\r\n    console.log(\"hi4\");\r\n    // CLASSES\r\n    /*if (isMobile) {\r\n        $('body').addClass('mobile');\r\n    }\r\n    else if (!isMobile) {\r\n        $('body').addClass('desktop');\r\n    }*/\r\n\r\n    // GLOBAL VARIABLES\r\n    let img,\r\n        canvas,\r\n        container,\r\n        imgRatio,\r\n        containerRatio;\r\n    let screenShotCanvas,\r\n        canvasDataURL,\r\n        canvasImage,\r\n        screenCaptured = false,\r\n        animateable = true,\r\n        popstate = false,\r\n        isFourOhFour = false,\r\n        inputReady = true;\r\n\r\n    //let seriously,\r\n    //    sourceImage,\r\n    //    layers,\r\n    //    edge,\r\n    //    blend1,\r\n    //    linearGreen,\r\n    //    scale1,\r\n    //    blend2,\r\n    //    linearPurple,\r\n    //    scale2,\r\n    //    blend3,\r\n    //    blend4,\r\n    //    blend5,\r\n    //    target;\r\n\r\n    // INITIAL LOAD FUNCTIONS\r\n\r\n    startupFunctions();\r\n    console.log(\"hi5\");\r\n\r\n   /* $(window).on('load', function(){*}*/\r\n    /*Had to comment out.*/\r\n        console.log(\"hi6\");\r\n        if (webGLTrue) {\r\n            captureScreen();\r\n            console.log(\"hi7\");\r\n        }\r\n        console.log(\"hi8\");\r\n        initialLoader();\r\n\r\n\r\n  /*  });*/\r\n\r\n    function startupFunctions() {\r\n        /*if (isMobile) {\r\n            $('body').removeClass('noscroll');\r\n        }*/\r\n\r\n        widowControl();\r\n    }\r\n\r\n    // IMAGE FUNCTIONS\r\n    //function imageFunctions() {\r\n\r\n        //let slickDrag = false;\r\n        //if (isMobile) {\r\n        //    slickDrag = true;\r\n       // }\r\n   // }\r\n\r\n    // DEBOUNCE FUNCTION\r\n    function debounce(func, wait, immediate) {\r\n        let timeout;\r\n\r\n        return function() {\r\n            let context = this, args = arguments;\r\n            let later = function() {\r\n                timeout = null;\r\n                if (!immediate) func.apply(context, args);\r\n            };\r\n            let callNow = immediate && !timeout;\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(later, wait);\r\n            if (callNow) func.apply(context, args);\r\n        };\r\n    }\r\n\r\n    let debounceAdjust = debounce(function() {\r\n        widowControl();\r\n    }, 50);\r\n\r\n    window.addEventListener('resize', debounceAdjust);\r\n\r\n    // WIDOW CONTROL\r\n    function widowControl() {\r\n       /* windowWidth = $(window).width();\r\n        let widowElements = $('h1, h2, h3, h4, h5, h6, li, p, figcaption, .case-study-tagline, .large-cta').not('.discovery_cell p, #site-nav li, footer li');*/\r\n\r\n\r\n        /*widowElements.each(function() {\r\n            $(this).html($(this).html().replace(/&nbsp;/g, ' '));\r\n        });\r\n\r\n        if (windowWidth > 640) {\r\n            widowElements.each(function() {\r\n                $(this).html($(this).html().replace(/\\s((?=(([^\\s<>]|<[^>]*>)+))\\2)\\s*$/,'&nbsp;$1'));\r\n            });\r\n        }*/\r\n    }\r\n\r\n    // HTML CANVAS & INITIAL LOAD FUNCTIONS\r\n    function captureScreen() {\r\n        html2canvas((ajax), {\r\n            letterRendering: true,\r\n        }).then(canvas  => {\r\n            screenShotCanvas = canvas;\r\n            canvasDataURL = screenShotCanvas.toDataURL();\r\n            canvasImage = new Image();\r\n            canvasImage.src = canvasDataURL;\r\n            screenCaptured = true;\r\n            /*canvasImage.style.border = \"none\";*/\r\n            console.log(canvas);\r\n        });\r\n    }\r\n\r\n    function initialLoader() {\r\n        $('body').removeClass('noscroll');\r\n\r\n        let loadText = 'Hello, I am Gary Liang.';\r\n        let loaderDone = false;\r\n        $.each(loadText.split(''), function(i, letter){\r\n            setTimeout(function(){\r\n                $('#loader-text').html($('#loader-text').html() + letter);\r\n                /*loadingText.html((loadingText).html() + letter);*/\r\n            }, 60*i);\r\n        });\r\n\r\n        setTimeout(function(){\r\n            loaderDone = true;\r\n        }, 1700);\r\n\r\n        //check to make sure the document has been fully loaded before removing loader\r\n        let readyStateCheckInterval = setInterval(function() {\r\n            if (document.readyState === \"complete\" && loaderDone ) {\r\n                clearInterval(readyStateCheckInterval);\r\n                $('#initial-loader').velocity({\r\n                    translateZ: 0,\r\n                    opacity: 0\r\n                }, {\r\n                    //display: 'none',\r\n                    delay: 0,\r\n                    duration: 800\r\n                });\r\n\r\n                if (webGLTrue) {\r\n                    loadPageCanvas();\r\n\r\n                    setTimeout(function(){\r\n                        removePageCanvas();\r\n                        $('#initial-loader').remove();\r\n                    }, 500);\r\n                }\r\n                else {\r\n                    setTimeout(function(){\r\n                        $('#initial-loader').remove();\r\n                    }, 1001);\r\n                }\r\n            }\r\n        }, 10);\r\n    }\r\n\r\n\r\n\r\n    // GLITCHING\r\n    function initializeGlitch(image, height) {\r\n        var container,\r\n            stats;\r\n\r\n        var camera,\r\n            scene,\r\n            sceneBG,\r\n            renderer,\r\n            composer,\r\n            composerScene;\r\n\r\n        //var mesh,\r\n        //    light,\r\n        //    dotEffect,\r\n        //    shiftEffect,\r\n        //    sepiaEffect;\r\n\r\n        let glitchDtSize = 100,\r\n           glitchDelay = 1,\r\n            glitchAmplification = .5;\r\n\r\n        let fps = 20;\r\n        if (isFourOhFour) {\r\n            fps = 5;\r\n        }\r\n\r\n        let SCREEN_WIDTH = window.innerWidth;\r\n        let SCREEN_HEIGHT = height;\r\n        /*let SCREEN_HEIGHT = window.innerHeight;\r\n        console.log(SCREEN_HEIGHT);\r\n        console.log(height);*/\r\n        //let ratio = SCREEN_WIDTH / SCREEN_HEIGHT;\r\n\r\n        /*if (height > 4096){\r\n            SCREEN_HEIGHT = 4096;\r\n        }*/\r\n\r\n        let windowHalfX = window.innerWidth / 2;\r\n        let windowHalfY = height / 2;\r\n\r\n        let delta = 0.1;\r\n\r\n        function init(){\r\n            scene = new THREE.Scene();\r\n            sceneBG = new THREE.Scene();\r\n\r\n            camera = new THREE.OrthographicCamera( -windowHalfX, windowHalfX, windowHalfY, -windowHalfY, 1, 10000 );\r\n            camera.position.z = 100;\r\n\r\n\r\n            let texture = new THREE.TextureLoader().load( image );\r\n            // turns off resizing\r\n            texture.minFilter = THREE.LinearFilter;\r\n\r\n            // immediately use the texture for material creation\r\n            //background\r\n            let background = new THREE.MeshBasicMaterial( { map: texture } );\r\n\r\n\r\n            background.map.needsUpdate = true;\r\n            /*let plane = new THREE.PlaneBufferGeometry(1, 1);*/\r\n            let plane = new THREE.PlaneBufferGeometry(1, 1);\r\n\r\n            let bgMesh = new THREE.Mesh(plane, background);\r\n            bgMesh.position.z = 1;\r\n            bgMesh.scale.set( SCREEN_WIDTH, height, 1 );\r\n            sceneBG.add(bgMesh);\r\n\r\n            bgMesh.material.map.needsUpdate = true;\r\n\r\n\r\n\r\n            //var sceneMask = new THREE.Scene();\r\n\r\n            renderer = new THREE.WebGLRenderer();\r\n            renderer.setClearColor( 0xffffff );\r\n            renderer.setSize( window.innerWidth, window.innerHeight );\r\n            renderer.setPixelRatio( window.devicePixelRatio );\r\n            renderer.autoClear = false;\r\n\r\n            renderer.gammaInput = true;\r\n            renderer.gammaOutput = true;\r\n\r\n            renderBackground = new RenderPass( sceneBG, camera);\r\n\r\n            $(renderer.domElement).attr('id', 'loader').css('height', height);\r\n            $('#main-body').append( renderer.domElement );\r\n\r\n            let rtParameters = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBFormat, stencilBuffer: true };\r\n\r\n            let clearMask = new ClearMaskPass();\r\n\r\n            composer = new EffectComposer( renderer, new THREE.WebGLRenderTarget( SCREEN_WIDTH, SCREEN_HEIGHT, rtParameters ) );\r\n            renderScene = new TexturePass( composer.renderTarget2.texture );\r\n            composer.addPass(renderBackground);\r\n            composer.addPass(clearMask);\r\n\r\n            composer1 = new EffectComposer( renderer, new THREE.WebGLRenderTarget( SCREEN_WIDTH, SCREEN_HEIGHT, rtParameters ) );\r\n\r\n            //let glitch = new GlitchPass(glitchDtSize, glitchDelay, glitchAmplification);\r\n            let glitch = new GlitchPass(glitchDtSize);\r\n            glitch.renderToScreen = true;\r\n\r\n            composer1.addPass(renderScene);\r\n            composer1.addPass(glitch);\r\n\r\n            renderScene.uniforms[ 'tDiffuse' ].value = composer.renderTarget2;\r\n        }\r\n\r\n        function render() {\r\n            renderer.clear();\r\n            composer.render(delta);\r\n            composer1.render(delta);\r\n        }\r\n\r\n        function animate() {\r\n            if (animateable){\r\n                setTimeout(function(){\r\n                    render();\r\n                    requestAnimationFrame( animate );\r\n                }, 1000 / fps);\r\n            }\r\n        }\r\n\r\n        init();\r\n        animate();\r\n    }\r\n\r\n    function loadPageCanvas() {\r\n        $('html').velocity('scroll', {\r\n            axis: 'y',\r\n            duration: 1000,\r\n            mobileHA: false\r\n        });\r\n\r\n        animateable = true;\r\n\r\n        initializeGlitch(canvasDataURL, screenShotCanvas.height);\r\n\r\n        $('#loader').velocity({\r\n            opacity: [1, 0]\r\n        }, {\r\n            duration: 1000\r\n        });\r\n    }\r\n\r\n\r\n    function removePageCanvas() {\r\n        $('#loader').velocity({\r\n            opacity: 0\r\n        }, {\r\n            delay: 500,\r\n            duration: 1000\r\n        });\r\n\r\n        setTimeout(function(){\r\n            animateable = false;\r\n            $('#loader').remove();\r\n        }, 1600);\r\n    }\r\n\r\n\r\n\r\n\r\n    /*Home page elements*/\r\n    function daWidth(event) {\r\n        let jquery_width = $(/*.home-content */'.grid2 span').width();\r\n        let js_width = document.querySelector(/*'.home-content */'.grid2 span').offsetWidth;\r\n\r\n        console.log(event + \" - jquery:\" + jquery_width + \", js:\" + js_width);\r\n    }\r\n    function resetHelloiaman() {\r\n        $('.home-content .i-am').removeAttr('style');\r\n        $('.home-content .i-am span').removeAttr('style');\r\n    }\r\n    function helloiaman(section) {\r\n        // resetHelloiaman();\r\n\r\n        let WIDTH = document.querySelector('.home-content .i-am .grid2').offsetWidth;\r\n         console.log(WIDTH);\r\n        let section_width;\r\n        let offset;\r\n\r\n        if (section === \"helloiam\") {\r\n            section_width = 203 / 263;\r\n            offset = 0;\r\n        } else if (section === \"iama\") {\r\n            section_width = 108 / 263;\r\n            offset = 128 / 263;\r\n        } else if (section === \"iaman\") {\r\n            section_width = 135 / 263;\r\n            offset = 128 / 263;\r\n        }\r\n\r\n        offset = offset * 100;\r\n        $('.home-content .i-am .grid2').css({\r\n            '-ms-transform': 'translateX(-' + offset.toString() + '%)',\r\n            '-webkit-transform': 'translateX(-' + offset.toString() + '%)',\r\n            'transform': 'translateX(-' + offset.toString() + '%)'\r\n\r\n        });\r\n        $('.home-content .i-am').css('width', (section_width * WIDTH).toString() + \"px\" );\r\n\r\n        console.log(offset);\r\n        console.log(\"this has worked\");\r\n        // '-ms-transform': 'translateX(-' + offset.toString() + '%)',\r\n        //     '-webkit-transform': 'translateX(-' + offset.toString() + '%)',\r\n        //     'transform': 'translateX(-' + offset.toString() + '%)'\r\n    }\r\n\r\n\r\n    function maxFillText(selector, completion=function(){}) {\r\n        $(selector).removeAttr('style');\r\n        jQuery(selector).textfill({\r\n            complete: function() {\r\n                completion();\r\n            }, maxFontPixels: 0\r\n        });\r\n    }\r\n\r\n    function randimateTechTitle() {\r\n        let LENGTH = 700;\r\n        let FRAMES = 2;\r\n        randimateText('.tech.title .line.one span', 'TECH', (LENGTH/FRAMES/4), FRAMES);\r\n        randimateText('.tech.title .line.two span', 'LOVER', (LENGTH/FRAMES/5), FRAMES);\r\n    }\r\n// Switching functionality\r\n    function switchToHomeTitle(selector) {\r\n        $('.title').removeClass('visible');\r\n        $(selector + '.title').addClass('visible');\r\n        maxFillText(selector + '.title .text-fill');\r\n    }\r\n    function switchToHomeDetails(selector) {\r\n        $('.details').removeClass('visible');\r\n        $(selector + '.details').addClass('visible');\r\n    }\r\n    function switchToHomeSwitch(selector) {\r\n        $('.switch').removeClass('active');\r\n        $(selector + '.switch').addClass('active');\r\n    }\r\n\r\n    function isVowel(s) {\r\n        return (/^[aeiou]$/i).test(s);\r\n    }\r\n\r\n    function switchToHome(selector) {\r\n        switchToHomeTitle(selector);\r\n        switchToHomeDetails(selector);\r\n        switchToHomeSwitch(selector);\r\n\r\n        // Case checks\r\n        if (selector === \".name\") {\r\n            console.log('helloiam');\r\n            helloiaman('helloiam');\r\n        } else if ( isVowel(selector.charAt(1)) ) {\r\n            console.log('iaman');\r\n            helloiaman('iaman');\r\n        } else {\r\n            console.log('iama');\r\n            helloiaman('iama');\r\n        }\r\n\r\n\r\n        if (selector === \".tech\") {\r\n            randimateTechTitle();\r\n        }\r\n\r\n        current = selector;\r\n    }\r\n\r\n    function randimateText(selector, text, speed, frames) {\r\n        if (speed === undefined) {\r\n            speed = 50;\r\n        }\r\n        if (frames === undefined) {\r\n            frames = 8;\r\n        }\r\n        /*let theLetters = \"abcdefghijklmnopqrstuvwxyz#%&^+=-\";*/ // You can customize what letters it will cycle through\r\n        let theLetters = \"01\";\r\n        let ctnt = text; // Your text goes here\r\n        let increment = frames; // frames per step. Must be >2\r\n        // speed is per frame, not per rustle\r\n\r\n\r\n        let clen = ctnt.length;\r\n        let si = 0;\r\n        let stri = 0;\r\n        let block = \"\";\r\n        let fixed = \"\";\r\n        //Call self x times, whole function wrapped in setTimeout\r\n        (function rustle (i) {\r\n            setTimeout(function() {\r\n                if (--i) { rustle(i); }\r\n                nextFrame(i);\r\n                si = si + 1;\r\n            }, speed);\r\n        })(clen*increment+1);\r\n        function nextFrame(pos) {\r\n            for (let i=0; i<clen-stri; i++) {\r\n                //Random number\r\n                let num = Math.floor(theLetters.length * Math.random());\r\n                //Get random letter\r\n                let letter = theLetters.charAt(num);\r\n                block = block + letter;\r\n            }\r\n            if (si === (increment-1)) {\r\n                stri++;\r\n            }\r\n            if (si === increment) {\r\n                // Add a letter;\r\n                // every speed*10 ms\r\n                fixed = fixed +  ctnt.charAt(stri - 1);\r\n                si = 0;\r\n            }\r\n            $(selector).html(fixed + block);\r\n            block = \"\";\r\n        }\r\n    }\r\n\r\n    /*Home page elements*/\r\n    /*resetHelloiaman();*/\r\n //daWidth(\"before load\");\r\nconsole.log(\"theLasthi\");\r\n    let current = \"\";\r\n\r\n    /*window.onload = function() {*/\r\n        console.log(\"thelasthi2\");\r\n        $('.name.switch').on('touchstart click', function(e) {\r\n            e.preventDefault();\r\n            switchToHome('.name');\r\n        });\r\n        $('.tech.switch').on('touchstart click', function(e) {\r\n            e.preventDefault();\r\n            switchToHome('.tech');\r\n        });\r\n        $('.creative.switch').on('touchstart click', function(e) {\r\n            e.preventDefault();\r\n            switchToHome('.creative');\r\n        });\r\n        /*$('.avid.switch').on('touchstart click', function(e) {\r\n            e.preventDefault();\r\n            switchToHome('.avid');\r\n        });*/\r\n    /*};*/\r\n    /*window.onresize = function() {\r\n        maxFillText('.text-fill', function() {\r\n            switchToHome(current);\r\n        });\r\n    };*/\r\n});\r\n\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}